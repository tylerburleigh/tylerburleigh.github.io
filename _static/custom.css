/* Google Fonts — Jost (headings/nav) + Libre Franklin (body) */
@import url('https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,100..900;1,100..900&family=Libre+Franklin:ital,wght@0,100..900;1,100..900&display=swap');

/* Font Awesome CDN */
@import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css');

/* MyST CSS presence flag to avoid false "BASE_URL" warning */
:root {
  --has-styling: 1;
}

/* Font overrides */
body {
  font-family: 'Libre Franklin', sans-serif;
  -webkit-font-smoothing: antialiased;
}

h1, h2, h3, h4, h5, h6 {
  font-family: 'Jost', sans-serif;
  font-weight: 600;
}

/* Profile image (homepage) */
div.profile-pic img {
  border-radius: 500px;
  width: 80%;
  max-width: 190px;
  margin: 0 auto;
  display: block;
}

/* Giscus comment reactions spacing */
.gsc-reactions {
  margin-top: 1em;
}

/* Reduce gap between article header and content (outline/TOC block) */
div.block.my-10 {
  margin-top: 0 !important;
  margin-bottom: 0 !important;
}

/* Bottom padding so content isn't flush against viewport bottom */
article {
  padding-bottom: 4rem;
}

/* Card footer padding */
.card .footer {
  overflow-wrap: break-word;
  word-wrap: break-word;
}

/* Accessible hide utility */
.visually-hidden {
  position: absolute !important;
  height: 1px;
  width: 1px;
  overflow: hidden;
  clip: rect(1px, 1px, 1px, 1px);
  white-space: nowrap;
}

/* CV embed */
.embed-container {
  position: relative;
  padding-bottom: 129%;
  height: 0;
  overflow: hidden;
  max-width: 100%;
}
.embed-container iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

/* Card hover effect */
.card {
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

/* Smooth link transitions */
a {
  transition: color 0.2s ease;
}

/* ========================================
   Landing page hero
   ======================================== */

.landing-hero {
  max-width: 920px;
  margin: 0 auto;
  text-align: center;
  padding: 2rem 1rem 1rem;
}

/* Profile image — circular frame */
.landing-hero .profile-frame {
  width: 200px;
  height: 200px;
  border-radius: 50%;
  overflow: hidden;
  margin: 0 auto;
  display: block;
  box-sizing: border-box;
  border: 0;
  background: transparent;
  box-shadow: 0 32px 90px rgba(0, 0, 0, 0.3);
}

.landing-hero .profile-frame img {
    margin-top: 0px;
}

/* Name heading */
.landing-hero h1 {
  font-family: 'Jost', sans-serif;
  font-size: 2.2rem;
  font-weight: 700;
  margin: 1rem 0 0.5rem;
}

/* Bio paragraph */
.landing-hero p {
  font-size: 1.05rem;
  line-height: 1.7;
  text-align: left;
  max-width: none;
  --hero-bio-size: 1.05rem;
}

.landing-hero .terminal-command {
  margin: 0 0 0.75rem;
}

.landing-hero .hero-bio {
  margin: -0.75rem 0 0;
}

/* ========================================
   Dracula terminal window
   ======================================== */

.terminal-window {
  background: #282a36;
  border-radius: 10px;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.35);
  max-width: 900px;
  margin: 1rem auto 0;
  overflow: hidden;
  font-family: "JetBrains Mono", "Fira Code", "Source Code Pro", "Cascadia Code", monospace;
}

.terminal-titlebar {
  background: #44475a;
  padding: 0.75rem 1rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  position: relative;
}

.terminal-titlebar-left {
  color: #f8f8f2;
  font-size: 0.9rem;
  font-weight: 600;
  font-family: "JetBrains Mono", "Fira Code", "Source Code Pro", "Cascadia Code", monospace;
}

.terminal-sparkle {
  color: #ffb86c;
  margin-right: 0.25rem;
}

.terminal-title {
  color: #6272a4;
  font-size: 0.75rem;
  letter-spacing: 0.08em;
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  font-family: "JetBrains Mono", "Fira Code", "Source Code Pro", "Cascadia Code", monospace;
}

.terminal-titlebar-right {
  color: #6272a4;
  font-size: 0.8rem;
  font-family: "JetBrains Mono", "Fira Code", "Source Code Pro", "Cascadia Code", monospace;
  margin-left: auto;
}

.terminal-body {
  padding: 1.25rem 1.5rem;
  color: #f8f8f2;
  font-family: "JetBrains Mono", "Fira Code", "Source Code Pro", "Cascadia Code", monospace;
  font-size: 1.05rem;
  line-height: 1.7;
}

.terminal-body p:last-of-type {
  margin-top: 0px !important;
}

.terminal-body .hero-bio {
  color: #f8f8f2;
  font-family: inherit;
  font-size: inherit;
}

.terminal-command {
  font-family: inherit;
  font-size: inherit;
  text-align: right;
}

/* Command bubble — hidden until "submitted" from input */
.command-bubble {
  display: inline-block;
  background: #44475a;
  color: #f8f8f2;
  padding: 0.35rem 0.75rem;
  border-radius: 12px;
  opacity: 0;
  animation: fade-in 0.001s 1.7s forwards;
}

/* Typewriter in the input field */
.input-typewriter {
  display: inline-block;
  overflow: hidden;
  white-space: nowrap;
  width: 0;
  vertical-align: bottom;
  color: #f8f8f2;
  animation:
    typewriter-cmd 1s steps(22) 0s forwards,
    input-submit 0.15s 1.4s forwards;
}

@keyframes typewriter-cmd {
  from { width: 0; }
  to { width: 22ch; }
}

@keyframes input-submit {
  from { opacity: 1; width: 22ch; }
  to { opacity: 0; width: 0; }
}

/* Thinking indicator */
.terminal-thinking {
  color: #6272a4;
  font-family: inherit;
  font-size: inherit;
  margin: 0;
  text-align: left;
  opacity: 0;
  max-height: 0;
  overflow: hidden;
  animation:
    thinking-show 0.3s 2.3s forwards,
    thinking-hide 0.3s 4.1s forwards;
}

.thinking-sparkle {
  color: #ffb86c;
}

.thinking-dots span {
  opacity: 0;
}
.thinking-dots span:nth-child(1) { animation: fade-in 0.001s 2.6s forwards; }
.thinking-dots span:nth-child(2) { animation: fade-in 0.001s 3.0s forwards; }
.thinking-dots span:nth-child(3) { animation: fade-in 0.001s 3.4s forwards; }

@keyframes thinking-show {
  to { opacity: 1; max-height: 3em; margin-top: 0.75rem; margin-bottom: 0.75rem; }
}

@keyframes thinking-hide {
  to { opacity: 0; max-height: 0; margin: 0; }
}

@keyframes fade-in {
  to { opacity: 1; }
}

/* Response sparkle */
.terminal-response-sparkle {
  color: #ffb86c;
  font-weight: 700;
  opacity: 0;
  animation: fade-in 0.001s 4.4s forwards;
}

/* Input field at bottom */
.terminal-input {
  border-top: 1px solid #44475a;
  padding: 0.75rem 1.5rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-family: inherit;
  font-size: 1.05rem;
}

.terminal-input-prompt {
  color: #bd93f9;
  font-weight: 700;
}


.terminal-input-cursor {
  display: inline-block;
  width: 2px;
  height: 1.1em;
  background: #6272a4;
  vertical-align: -0.1em;
  animation: caret-blink 0.9s steps(2, start) infinite;
}

/* Dracula syntax-highlight colors for keywords */
.typing-word.dc-cyan   { color: #8be9fd; }
.typing-word.dc-pink   { color: #ff79c6; }
.typing-word.dc-orange { color: #ffb86c; }
.typing-word.dc-green  { color: #50fa7b; }
.typing-word.dc-purple { color: #bd93f9; }
.typing-word.dc-yellow { color: #f1fa8c; }

/* Typing effect (word-by-word, CSS-only) */
.landing-hero .typing-words {
  --word-duration: 0.01s;
  font-size: 0;
  position: relative;
  display: inline;
}

.landing-hero .typing-word {
  display: inline-block;
  max-width: 0;
  opacity: 0;
  overflow: hidden;
  white-space: pre;
  vertical-align: bottom;
  font-size: var(--hero-bio-size);
  line-height: inherit;
  animation: word-reveal var(--word-duration) steps(1, end) forwards;
}

.landing-hero .typing-word:nth-child(1) { animation-delay: 4.6s; }
.landing-hero .typing-word:nth-child(2) { animation-delay: 4.7s; }
.landing-hero .typing-word:nth-child(3) { animation-delay: 4.8s; }
.landing-hero .typing-word:nth-child(4) { animation-delay: 4.9s; }
.landing-hero .typing-word:nth-child(5) { animation-delay: 5.0s; }
.landing-hero .typing-word:nth-child(6) { animation-delay: 5.1s; }
.landing-hero .typing-word:nth-child(7) { animation-delay: 5.2s; }
.landing-hero .typing-word:nth-child(8) { animation-delay: 5.3s; }
.landing-hero .typing-word:nth-child(9) { animation-delay: 5.4s; }
.landing-hero .typing-word:nth-child(10) { animation-delay: 5.5s; }
.landing-hero .typing-word:nth-child(11) { animation-delay: 5.6s; }
.landing-hero .typing-word:nth-child(12) { animation-delay: 5.7s; }
.landing-hero .typing-word:nth-child(13) { animation-delay: 5.8s; }
.landing-hero .typing-word:nth-child(14) { animation-delay: 5.9s; }
.landing-hero .typing-word:nth-child(15) { animation-delay: 6.0s; }
.landing-hero .typing-word:nth-child(16) { animation-delay: 6.1s; }
.landing-hero .typing-word:nth-child(17) { animation-delay: 6.2s; }
.landing-hero .typing-word:nth-child(18) { animation-delay: 6.3s; }
.landing-hero .typing-word:nth-child(19) { animation-delay: 6.4s; }
.landing-hero .typing-word:nth-child(20) { animation-delay: 6.5s; }
.landing-hero .typing-word:nth-child(21) { animation-delay: 6.6s; }
.landing-hero .typing-word:nth-child(22) { animation-delay: 6.7s; }
.landing-hero .typing-word:nth-child(23) { animation-delay: 6.8s; }
.landing-hero .typing-word:nth-child(24) { animation-delay: 6.9s; }
.landing-hero .typing-word:nth-child(25) { animation-delay: 7.0s; }
.landing-hero .typing-word:nth-child(26) { animation-delay: 7.1s; }
.landing-hero .typing-word:nth-child(27) { animation-delay: 7.2s; }
.landing-hero .typing-word:nth-child(28) { animation-delay: 7.3s; }
.landing-hero .typing-word:nth-child(29) { animation-delay: 7.4s; }
.landing-hero .typing-word:nth-child(30) { animation-delay: 7.5s; }
.landing-hero .typing-word:nth-child(31) { animation-delay: 7.6s; }
.landing-hero .typing-word:nth-child(32) { animation-delay: 7.7s; }
.landing-hero .typing-word:nth-child(33) { animation-delay: 7.8s; }
.landing-hero .typing-word:nth-child(34) { animation-delay: 7.9s; }
.landing-hero .typing-word:nth-child(35) { animation-delay: 8.0s; }
.landing-hero .typing-word:nth-child(36) { animation-delay: 8.1s; }
.landing-hero .typing-word:nth-child(37) { animation-delay: 8.2s; }
.landing-hero .typing-word:nth-child(38) { animation-delay: 8.3s; }
.landing-hero .typing-word:nth-child(39) { animation-delay: 8.4s; }
.landing-hero .typing-word:nth-child(40) { animation-delay: 8.5s; }
.landing-hero .typing-word:nth-child(41) { animation-delay: 8.6s; }
.landing-hero .typing-word:nth-child(42) { animation-delay: 8.7s; }
.landing-hero .typing-word:nth-child(43) { animation-delay: 8.8s; }
.landing-hero .typing-word:nth-child(44) { animation-delay: 8.9s; }
.landing-hero .typing-word:nth-child(45) { animation-delay: 9.0s; }
.landing-hero .typing-word:nth-child(46) { animation-delay: 9.1s; }
.landing-hero .typing-word:nth-child(47) { animation-delay: 9.2s; }
.landing-hero .typing-word:nth-child(48) { animation-delay: 9.3s; }
.landing-hero .typing-word:nth-child(49) { animation-delay: 9.4s; }
.landing-hero .typing-word:nth-child(50) { animation-delay: 9.5s; }
.landing-hero .typing-word:nth-child(51) { animation-delay: 9.6s; }
.landing-hero .typing-word:nth-child(52) { animation-delay: 9.7s; }
.landing-hero .typing-word:nth-child(53) { animation-delay: 9.8s; }
.landing-hero .typing-word:nth-child(54) { animation-delay: 9.9s; }
.landing-hero .typing-word:nth-child(55) { animation-delay: 10.0s; }
.landing-hero .typing-word:nth-child(56) { animation-delay: 10.1s; }
.landing-hero .typing-word:nth-child(57) { animation-delay: 10.2s; }
.landing-hero .typing-word:nth-child(58) { animation-delay: 10.3s; }
.landing-hero .typing-word:nth-child(59) { animation-delay: 10.4s; }
.landing-hero .typing-word:nth-child(60) { animation-delay: 10.5s; }
.landing-hero .typing-word:nth-child(61) { animation-delay: 10.6s; }
.landing-hero .typing-word:nth-child(62) { animation-delay: 10.7s; }
.landing-hero .typing-word:nth-child(63) { animation-delay: 10.8s; }
.landing-hero .typing-word:nth-child(64) { animation-delay: 10.9s; }
.landing-hero .typing-word:nth-child(65) { animation-delay: 11.0s; }
.landing-hero .typing-word:nth-child(66) { animation-delay: 11.1s; }
.landing-hero .typing-word:nth-child(67) { animation-delay: 11.2s; }
.landing-hero .typing-word:nth-child(68) { animation-delay: 11.3s; }
.landing-hero .typing-word:nth-child(69) { animation-delay: 11.4s; }

.landing-hero .typing-words::after {
  content: "";
  display: inline-block;
  width: 0.12em;
  height: 1em;
  margin-left: 0.1em;
  background: #50fa7b;
  vertical-align: -0.1em;
  font-size: var(--hero-bio-size);
  line-height: 1;
  opacity: 0;
  animation: caret-blink 0.9s steps(2, start) 4.6s infinite;
}

.landing-hero .typing-fallback {
  display: none;
}

@keyframes word-reveal {
  to {
    max-width: 24ch;
    opacity: 1;
  }
}

@keyframes caret-blink {
  0%,
  49% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}

@media (prefers-reduced-motion: reduce) {
  .landing-hero .typing-words {
    display: none;
  }
  .landing-hero .typing-fallback {
    display: inline;
    color: #f8f8f2;
  }
  .terminal-thinking {
    display: none;
  }
  .command-bubble {
    opacity: 1;
    animation: none;
  }
  .input-typewriter {
    display: none;
  }
  .terminal-response-sparkle {
    opacity: 1;
    animation: none;
  }
}

/* ========================================
   Google Scholar citation widget
   ======================================== */

.gs-widget {
  max-width: 520px;
  margin: 1.5rem auto;
  font-family: 'Libre Franklin', sans-serif;
  color: #444;
}

/* --- Header row (Cited by + VIEW ALL) --- */
.gs-header {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid #ddd;
  margin-bottom: 0;
}

.gs-title {
  font-size: 1.1rem;
  font-weight: 400;
  color: #333;
}

.gs-view-all {
  font-size: 0.85rem;
  font-weight: 600;
  letter-spacing: 0.04em;
  color: #3348b5;
  text-decoration: none;
}

.gs-view-all:hover {
  text-decoration: underline;
}

/* --- Stats table (replicates GS two-column layout) --- */
.gs-table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 1.5rem;
  font-size: 0.95rem;
}

.gs-widget .gs-table th {
  font-weight: bold;
  color: #333;
  text-align: right !important;
  padding: 0.3rem 0.6rem;
  border-bottom: 1px solid #ddd;
}

.gs-widget .gs-table th:first-child {
  text-align: left !important;
}

.gs-table tbody td {
  padding: 0.45rem 0.6rem;
  text-align: right;
  font-size: 0.95rem;
}

.gs-table .gs-row-label {
  text-align: left;
  font-weight: 400;
  color: #333;
}

/* --- Bar chart --- */
.gs-chart-wrap {
  display: flex;
  align-items: stretch;
  gap: 0.4rem;
  margin-bottom: 0.75rem;
}

.gs-chart-area {
  flex: 1;
  position: relative;
  height: 200px;
}

.gs-bars {
  display: flex;
  align-items: flex-end;
  gap: 6px;
  height: 100%;
  position: relative;
  z-index: 1;
}

.gs-col {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-end;
  height: 100%;
}

.gs-bar {
  width: 100%;
  max-width: 42px;
  background: #9e9e9e;
  border-radius: 1px;
  min-height: 2px;
  transition: background 0.2s;
}

.gs-bar:hover {
  background: #757575;
}

.gs-year {
  margin-top: 6px;
  font-size: 0.75rem;
  color: #888;
  white-space: nowrap;
}

/* Y-axis labels (right side) */
.gs-y-axis {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  align-items: flex-end;
  padding-bottom: 22px; /* align with bar area, above year labels */
  min-width: 2rem;
}

.gs-tick {
  font-size: 0.75rem;
  color: #888;
  line-height: 1;
}

/* Gridlines */
.gs-gridline {
  position: absolute;
  left: 0;
  right: 0;
  height: 0;
  border-top: 1px solid #eee;
  z-index: 0;
}

/* Footer */
.gs-footer {
  font-size: 0.78rem;
  color: #aaa;
  margin-top: 0.25rem;
}

.gs-footer a {
  color: #999;
  text-decoration: underline;
}

/* Dark mode */
.dark .gs-widget {
  color: #ccc;
}

.dark .gs-header {
  border-bottom-color: #444;
}

.dark .gs-title {
  color: #ddd;
}

.dark .gs-view-all {
  color: #8be9fd;
}

.dark .gs-table th {
  color: #ddd;
  border-bottom-color: #444;
}

.dark .gs-table tbody td {
  color: #ccc;
}

.dark .gs-table .gs-row-label {
  color: #ddd;
}

.dark .gs-bar {
  background: #888;
}

.dark .gs-bar:hover {
  background: #aaa;
}

.dark .gs-year,
.dark .gs-tick {
  color: #999;
}

.dark .gs-gridline {
  border-top-color: #333;
}

.dark .gs-footer {
  color: #777;
}

.dark .gs-footer a {
  color: #888;
}

/* ========================================
   Article info block (research article pages)
   ======================================== */

.article-info-block {
  background: #f8f9fa;
  border: 1px solid #e0e0e0;
  border-radius: 6px;
  padding: 0.75rem 1rem;
  margin: 0.5rem 0 1.5rem;
  font-size: 0.92rem;
  line-height: 1.6;
}

.article-info-block p {
  margin: 0.25rem 0;
}

.article-info-block a {
  color: #3348b5;
  text-decoration: none;
}

.article-info-block a:hover {
  text-decoration: underline;
}

.dark .article-info-block {
  background: #1e2028;
  border-color: #3a3d4a;
  color: #ccc;
}

.dark .article-info-block strong {
  color: #e0e0e0;
}

.dark .article-info-block a {
  color: #8be9fd;
}

/* Blog heading */
.landing-hero h2 {
  font-family: 'Jost', sans-serif;
  font-size: 1.5rem;
  font-weight: 600;
  margin-top: 2.5rem;
}

/* Dark mode overrides */
.dark .landing-hero .profile-frame {
  box-shadow: 0 36px 100px rgba(0, 0, 0, 0.8);
}

/* Hide next/prev footer links on landing page */
article:has(.landing-hero) .myst-footer-links {
  display: none;
}

/* Center landing hero on large screens without breaking sidebar layouts */
@media (min-width: 1024px) {
  article.article-grid > .landing-hero {
    grid-column: page;
    width: min(100%, 900px);
    margin-left: auto;
    margin-right: auto;
    justify-self: center;
  }
}

/* Balance the book-theme grid at >=1024px so content stays centered across zooms */
@media (min-width: 768px) {
  .article-grid {
    grid-template-columns:
      [screen-start] .25rem
      [screen-inset-start] 1fr
      [page-start] 3rem
      [page-inset-start] minmax(4rem, 9rem)
      [body-outset-start] 3rem
      [body-start gutter-left-start] 1rem
      [body-inset-start] minmax(8ch, 10ch)
      [middle-start] minmax(8ch, 10ch)
      [gutter-left-end] minmax(8ch, 10ch) minmax(8ch, 10ch)
      [gutter-right-start] minmax(8ch, 10ch)
      [middle-end] minmax(8ch, 10ch)
      [body-inset-end] 1rem
      [body-end gutter-right-end] 3rem
      [body-outset-end] minmax(4rem, 9rem)
      [page-inset-end] 3rem
      [page-end] 1fr
      [screen-inset-end] .25rem
      [screen-end];
  }
}
